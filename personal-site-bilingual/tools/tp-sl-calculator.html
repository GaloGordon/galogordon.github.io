<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><meta name="description" content="TP/SL calculator for crypto perpetuals"><title>TP/SL Calculator · My Site</title><link rel="stylesheet" href="/assets/style.css"><script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script><script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script><script src="https://unpkg.com/@babel/standalone/babel.min.js"></script><script>window.PAGE_KEY='tools'</script><script src="/assets/translations.js"></script><script src="/assets/i18n.js"></script></head><body><div class="container"><div class="nav"><a class="brand" href="/"><span style="color:#22c55e">></span> <span data-i18n="__brand"></span></a><div style="display:flex;gap:.25rem;flex-wrap:wrap;align-items:center"><a href="/index.html" data-i18n="nav.home">Home</a><a href="/about.html" data-i18n="nav.about">About</a><a href="/cv.html" data-i18n="nav.cv">Resume</a><a href="/tools/tp-sl-calculator.html" data-i18n="nav.tools">Tools</a><div class="lang-switch" title="Language"><button data-lang="en" class="active">EN</button><button data-lang="es">ES</button></div></div></div><div id="root"></div><div class="footer" data-i18n="footer">© 2025 · Built with ❤️ and GitHub Pages</div></div><script type="text/babel">const {useMemo,useState}=React;function Row({label,value,highlight}){return(<div className="flex items-center justify-between gap-4" style={{borderBottom:"1px solid #1f2937",padding:"8px 0"}}><span style={{color:"#94a3b8"}}>{label}</span><span style={{fontWeight:600,color:highlight==="pos"?"#16a34a":(highlight==="neg"?"#ef4444":"#fff")}}>{value}</span></div>);}function PerpRiskCalculator(){const[side,setSide]=useState("Long");const[entry,setEntry]=useState(30000);const[stop,setStop]=useState(28800);const[takeProfit,setTakeProfit]=useState(31200);const[margin,setMargin]=useState(1000);const[leverage,setLeverage]=useState(10);const calc=useMemo(()=>{const valid=entry>0&&leverage>0&&margin>0;if(!valid)return null;const positionSize=margin*leverage;const qty=positionSize/entry;const slDiff=side==="Long"?entry-stop:stop-entry;const tpDiff=side==="Long"?takeProfit-entry:entry-takeProfit;const slPct=slDiff/entry*100;const tpPct=tpDiff/entry*100;const pnlAtSL=-qty*slDiff;const pnlAtTP=qty*tpDiff;const riskPctOfMargin=pnlAtSL/margin*100;const rewardPctOfMargin=pnlAtTP/margin*100;const rr=tpDiff>0&&slDiff>0?Math.abs(pnlAtTP/Math.abs(pnlAtSL)):NaN;const approxLiq=side==="Long"?entry*(1-1/leverage):entry*(1+1/leverage);const slVsLiq=side==="Long"?stop-approxLiq:approxLiq-stop;return{positionSize,qty,slDiff,tpDiff,slPct,tpPct,pnlAtSL,pnlAtTP,riskPctOfMargin,rewardPctOfMargin,rr,approxLiq,slVsLiq};},[entry,stop,takeProfit,margin,leverage,side]);const inputStyle={width:"100%",padding:"12px 14px",borderRadius:"14px",border:"1px solid #1f2937",background:"#0b1220",color:"#e5e7eb",outline:"none"};return(<div className="grid" style={{gap:"16px"}}><div className="card"><h1 data-i18n="h1">TP/SL Calculator (Perps)</h1><p data-i18n="intro">Intro</p></div><div className="grid grid-2"><div className="card"><h2 data-i18n="inputs">Inputs</h2><div style={{display:"grid",gap:"10px"}}><div><small data-i18n="side" style={{color:"#94a3b8"}}>Side</small><br/><div style={{display:"flex",gap:"8px",marginTop:"6px"}}><button onClick={()=>setSide("Long")} className="btn" style={{background:side==="Long"?"linear-gradient(90deg,#22c55e,#38bdf8)":"none",border:"1px solid #1f2937"}}>Long</button><button onClick={()=>setSide("Short")} className="btn" style={{background:side==="Short"?"linear-gradient(90deg,#22c55e,#38bdf8)":"none",border:"1px solid #1f2937"}}>Short</button></div></div><label><small data-i18n="entry" style={{color:"#94a3b8"}}>Entry price</small><br/><input type="number" value={entry} onChange={e=>setEntry(Number(e.target.value))} style={inputStyle} /></label><label><small data-i18n="sl" style={{color:"#94a3b8"}}>Stop loss</small><br/><input type="number" value={stop} onChange={e=>setStop(Number(e.target.value))} style={inputStyle} /></label><label><small data-i18n="tp" style={{color:"#94a3b8"}}>Take profit</small><br/><input type="number" value={takeProfit} onChange={e=>setTakeProfit(Number(e.target.value))} style={inputStyle} /></label><label><small data-i18n="margin" style={{color:"#94a3b8"}}>Margin ($)</small><br/><input type="number" value={margin} onChange={e=>setMargin(Number(e.target.value))} style={inputStyle} /></label><label><small data-i18n="lev" style={{color:"#94a3b8"}}>Leverage</small><br/><input type="range" min="1" max="100" value={leverage} onChange={e=>setLeverage(Number(e.target.value))} /><div style={{marginTop:"4px"}}><b>{leverage}x</b></div></label></div></div><div className="card"><h2 data-i18n="metrics">Metrics</h2>{calc?(<div style={{display:"grid",gap:"8px"}}><Row label={<span data-i18n="m.side">Side</span>} value={side} /><Row label={<span data-i18n="m.pos">Position size</span>} value={`$${new Intl.NumberFormat().format(calc.positionSize)}`} /><Row label={<span data-i18n="m.qty">Quantity</span>} value={`${new Intl.NumberFormat(undefined,{ maximumFractionDigits: 6 }).format(calc.qty)} coins`} /><Row label={<span data-i18n="m.toSL">Move to SL</span>} value={`${calc.slDiff.toFixed(2)} (${calc.slPct.toFixed(2)}%)`} /><Row label={<span data-i18n="m.toTP">Move to TP</span>} value={`${calc.tpDiff.toFixed(2)} (${calc.tpPct.toFixed(2)}%)`} /><Row label={<span data-i18n="m.pnlSL">PnL @ SL</span>} value={`$${calc.pnlAtSL.toFixed(2)}`} highlight="neg" /><Row label={<span data-i18n="m.pnlTP">PnL @ TP</span>} value={`$${calc.pnlAtTP.toFixed(2)}`} highlight="pos" /><Row label={<span data-i18n="m.risk">Risk % of margin</span>} value={`${calc.riskPctOfMargin.toFixed(2)}%`} highlight="neg" /><Row label={<span data-i18n="m.reward">Reward % of margin</span>} value={`${calc.rewardPctOfMargin.toFixed(2)}%`} highlight="pos" /><Row label={<span data-i18n="m.rr">R : R</span>} value={isFinite(calc.rr) ? `${calc.rr.toFixed(2)} : 1` : "–"} /></div>):<p style={{color:"#94a3b8"}}>…</p>}</div></div><div className="card"><h2 data-i18n="safety">Safety</h2>{calc?(<div style={{display:"grid",gap:"8px"}}><Row label={<span data-i18n="liq">Approx. liquidation</span>} value={`$${calc.approxLiq.toFixed(2)}`} /><Row label={<span data-i18n="slvliq">SL vs Liq.</span>} value={`${(calc.slVsLiq>=0?'+':'')}${calc.slVsLiq.toFixed(2)}`} highlight={calc.slVsLiq<0?'neg':undefined} /><p className="muted" data-i18n="disclaimer">Disclaimer</p></div>):<p style={{color:"#94a3b8"}}>…</p>}</div></div>)}ReactDOM.createRoot(document.getElementById("root")).render(<PerpRiskCalculator/>);</script></body></html>