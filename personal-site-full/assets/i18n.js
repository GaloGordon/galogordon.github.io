(function(){const LS_KEY='lang';const fallback='en';const supported=['en','es'];function getLang(){const s=localStorage.getItem(LS_KEY);return supported.includes(s)?s:fallback}function setLang(l){if(!supported.includes(l))l=fallback;localStorage.setItem(LS_KEY,l);applyTranslations(l);updateSwitcher(l)}function applyTranslations(l){if(!window.TRANSLATIONS||!window.PAGE_KEY)return;const d=(window.TRANSLATIONS[l]||{})[window.PAGE_KEY]||{};const c=(window.TRANSLATIONS[l]||{}).common||{};const m=Object.assign({},c,d);document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.getAttribute('data-i18n');const v=m[k];if(typeof v==='string')el.innerHTML=v});if(m.__title)document.title=m.__title}function updateSwitcher(l){document.querySelectorAll('[data-lang]').forEach(b=>{b.classList.toggle('active',b.getAttribute('data-lang')===l)})}window.__i18n={getLang,setLang,applyTranslations};document.addEventListener('DOMContentLoaded',function(){const l=getLang();applyTranslations(l);updateSwitcher(l);document.querySelectorAll('[data-lang]').forEach(b=>b.addEventListener('click',()=>setLang(b.getAttribute('data-lang'))))})})();